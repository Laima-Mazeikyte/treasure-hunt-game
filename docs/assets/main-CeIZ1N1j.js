import{h as Bt,e as It,d as at,i as zt}from"./instantdb-D5dQ5UkJ.js";/* empty css              */const V=document.getElementById("grid-container"),A=40,ht=navigator.userAgent||"",Ft=/Chrome/.test(ht)&&!/Edg|OPR|Brave|Chromium/.test(ht),Dt=!Ft;let j=[],g=-1e3,y=-1e3,I=[],O=0,x=!1,v=!1,z=!1,W=null,L=[],E=1,it=3,tt=0,et=0,_=!1,q=!1,J=null;function G(){document.body.classList.toggle("performance-mode",Dt&&x)}const N={classic:{name:"Treasure Hunt",colors:{baseColor:{r:102,g:194,b:255},targetColor:{r:255,g:92,b:52},hazardColor:{r:53,g:30,b:40}},assets:{target:{src:"target-gem-01.svg",size:32,randomColor:!0},hazard:{src:"hazzard-octopus.svg",size:32}},copy:{gameTitle:"Treasure Hunt",themePrompt:"Select a theme:",levelPrompt:"Select a level to start:",levelButtonTemplate:"Level {level}",levelButtonSubtext:"{hazards} Hazards, {targets} Targets",legendTargetLabel:"Targets",legendHazardLabel:"Hazards",gameOverTitle:"Game Over!",gameOverMessage:"You were caught by a hazard!",levelCompleteTitle:"Level {level} complete!",levelCompleteMessage:"All targets found!",nextLevelCta:"Next Level",restartCta:"Restart Game",playAgainCta:"Play<br>Again",saveScoreCta:"Save<br>Score",finishRunCta:"Finish Run"},levelOverrides:{},dotGrid:{type:"symbols",characters:"▲◆•✦★◊",fontSize:20,fontFamily:"Arial, sans-serif",colorSource:"custom",color:{r:215,g:239,b:255}},dotBehavior:{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,baseJitterAmount:2,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200}}};let w="classic",T={...N.classic.colors.baseColor},ct={...N.classic.colors.targetColor},lt={...N.classic.colors.hazardColor};const rt=400,yt=300;function B(t){return N[t]||N.classic}function Z(t){t&&(t.innerHTML="",t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundRepeat="",t.style.backgroundPosition="")}async function K(t,e){if(!t||!e||!e.src)return;const n=e.size||40;t.style.width=`${n}px`,t.style.height=`${n}px`,Z(t);const o=e.src.endsWith(".svg"),s=e.src.match(/\.(png|jpg|jpeg|gif|webp)$/i);if(o){const i=t.classList.contains("target")||t.id==="target-legend-icon";e.randomColor&&i?fetch(e.src).then(r=>r.text()).then(r=>{t.innerHTML=r;const c=t.querySelector("svg");if(!c)return;c.style.width="100%",c.style.height="100%",c.style.display="block";const l=Xt();c.querySelectorAll("path").forEach(u=>{u.setAttribute("fill",l)});const d=(u=>{const f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return f?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null})(l);d&&(t.style.filter=`drop-shadow(0 0 8px rgba(${d.r}, ${d.g}, ${d.b}, 0.9)) drop-shadow(0 0 12px rgba(${d.r}, ${d.g}, ${d.b}, 0.6))`)}).catch(r=>{console.error("Failed to load SVG for color randomization:",r),t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center"}):(t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center");return}if(s){t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center";return}}function Ht(t){return t.replace(/\s+/g," ").trim()}async function Rt(t){if(_)return{ok:!1,error:"Score already saved for this run."};if(!It()||!at)return{ok:!1,error:"Leaderboard is not configured yet."};const e=zt(),n={nickname:t,totalTargets:tt,levelsCompleted:et,createdAt:Date.now()};try{return await at.transact(at.tx.leaderboard_entries[e].update(n)),_=!0,{ok:!0,entryId:e}}catch{return{ok:!1,error:"Could not save score. Please try again."}}}function xt(t){const e=t.innerHTML;B(w),t.innerHTML=`
        <p style="font-size: 32px; color: #F4C2C2; margin-bottom: 20px;">Levels: ${et}<br>Treasures: ${tt}</p>
        <form class="score-form">
            <label class="score-label" for="score-nickname-input" style="color: white;">Nickname</label>
            <input id="score-nickname-input" class="score-input" type="text" maxlength="20" />
            <div class="score-error" id="score-error-message"></div>
            <div class="score-actions-row">
                <button type="submit" class="score-submit">Save</button>
                <button type="button" class="score-cancel">Cancel</button>
            </div>
        </form>
    `;const n=t.querySelector("#score-nickname-input"),o=t.querySelector(".score-cancel"),s=t.querySelector(".score-submit"),i=t.querySelector(".score-form"),r=document.getElementById("score-error-message");n&&r&&n.addEventListener("input",()=>{r.textContent=""});const c=()=>{t.innerHTML=e;const l=t.querySelector("#restart-button"),a=t.querySelector("#save-score-button");l&&l.addEventListener("click",()=>{location.reload()}),a&&a.addEventListener("click",()=>{xt(t)})};Bt?_&&(s.disabled=!0):s.disabled=!0,o.addEventListener("click",c),i.addEventListener("submit",async l=>{l.preventDefault();const a=document.getElementById("score-error-message"),m=Ht(n.value||"");if(!m){a.textContent="Please add a nickname";return}if(m.length<2){a.textContent="Please add a nickname";return}if(m.length>20){a.textContent="Nickname is too long";return}a.textContent="",s.disabled=!0,o.disabled=!0,s.textContent="Saving...";const d=await Rt(m);if(!d.ok){s.disabled=!1,o.disabled=!1,s.textContent="Save",a.textContent=d.error||"Could not save score";return}s.textContent="Saved!",setTimeout(()=>{window.location.href=`leaderboard.html?entry=${d.entryId}`},400)}),n&&n.focus()}function At(t){const e=document.getElementById("start-title");e&&(e.textContent=t.copy.gameTitle)}function dt(t,e){const n=U(t,e),o=document.getElementById("target-legend-icon"),s=document.getElementById("hazard-legend-icon");if(o&&n.assets.target){const i={...n.assets.target};i.randomColor=!0,K(o,i)}s&&n.assets.hazard&&K(s,n.assets.hazard)}function U(t,e=w){const n=B(e),o=t===1?0:Math.min(t-1,8),s=t<=2?3:3+(t-2)*2;return{hazards:o,targets:s,assets:{target:n.assets.target,hazard:n.assets.hazard},movingHazards:!0}}function Ct(){const t=U(E);L=[];const e=250,n=t.assets.hazard,o=n.size||40,s=o/2;for(let i=0;i<t.hazards;i++){const r=document.createElement("div");r.className="hazard",K(r,n);let c,l,a,m,d;do{c=Math.random()*(window.innerWidth-o*2)+o,l=Math.random()*(window.innerHeight-o*2)+o,a=L.some($=>{const M=c-$.x,k=l-$.y;return Math.sqrt(M*M+k*k)<200});const p=c-g,C=l-y;m=Math.sqrt(p*p+C*C)<e;const S=l<80&&c<200,b=l>window.innerHeight-100&&c<250;d=S||b}while(a||m||d);r.style.left=`${c-s}px`,r.style.top=`${l-s}px`,document.body.appendChild(r);const u=.5,f=E>2?u*Math.pow(1.1,E-2):u,h=Math.random()*Math.PI*2;L.push({element:r,x:c,y:l,size:o,velocityX:Math.cos(h)*f,velocityY:Math.sin(h)*f})}}function Mt(){const t=U(E);it=t.targets,I=[];const e=window.innerWidth<640,n=e?80:200,o=e?80:150,s=e?60:80,i=e?120:200,r=e?80:100,c=e?150:250,l=t.assets.target,a=l.size||40,m=a/2;for(let d=0;d<t.targets;d++){const u=document.createElement("div");u.className="target";const f=10;let h,p,C,X,S,b,$=0;const M=500;do{h=Math.random()*(window.innerWidth-a*2)+a,p=Math.random()*(window.innerHeight-a*2)+a,C=L.some(F=>{const D=h-F.x,H=p-F.y;return Math.sqrt(D*D+H*H)<o}),S=I.some(F=>{const D=h-F.x,H=p-F.y;return Math.sqrt(D*D+H*H)<f});const k=h-g,R=p-y;X=Math.sqrt(k*k+R*R)<n;const Y=p<s&&h<i,st=p>window.innerHeight-r&&h<c;if(b=Y||st,$++,$>M){console.warn(`Could not find valid position for target ${d+1} after ${M} attempts, placing anyway`);break}}while(C||X||S||b);u.style.left=`${h-m}px`,u.style.top=`${p-m}px`,document.body.appendChild(u),K(u,l).catch(k=>{console.error("Failed to apply asset to target:",k)}),I.push({element:u,x:h,y:p,size:a,revealed:!1,hasBeenHovered:!1})}}function qt(t){return t[Math.floor(Math.random()*t.length)]}function Xt(){const t=["#F7C0C1","#FFDDF3","#FF9BD3","#FCFFBD","#F7A1A2","#E9F056","#CA96FF","#DCBAFF","#B8F05C","#99F8FF","#23F0FF","#6FFFAD"];return t[Math.floor(Math.random()*t.length)]}function Et(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Pt(t,e){if(!e){t.className="dot";return}if(e.type==="dots")t.className="dot";else{t.className="dot dot-text";const n=qt(e.characters);t.textContent=n,e.fontSize&&(t.style.fontSize=`${e.fontSize}px`),e.fontFamily&&(t.style.fontFamily=e.fontFamily),e.fontWeight&&(t.style.fontWeight=e.fontWeight)}}function $t(){const t=window.innerWidth,e=window.innerHeight,n=Math.ceil(t/A)+1,o=Math.ceil(e/A)+1;V.style.gridTemplateColumns=`repeat(${n}, ${A}px)`,V.style.gridTemplateRows=`repeat(${o}, ${A}px)`,V.innerHTML="",j=[];const i=B(w).dotGrid;for(let r=0;r<o;r++)for(let c=0;c<n;c++){const l=document.createElement("div");Pt(l,i);const a=c*A,m=r*A;j.push({element:l,originalX:a,originalY:m,currentX:a,currentY:m}),V.appendChild(l)}}function Yt(){U(E),x&&L.forEach(t=>{t.x+=t.velocityX,t.y+=t.velocityY;const e=Math.max(40,t.size);(t.x<e||t.x>window.innerWidth-e)&&(t.velocityX*=-1,t.x=Math.max(e,Math.min(window.innerWidth-e,t.x))),(t.y<e||t.y>window.innerHeight-e)&&(t.velocityY*=-1,t.y=Math.max(e,Math.min(window.innerHeight-e,t.y))),t.element.style.left=`${t.x-t.size/2}px`,t.element.style.top=`${t.y-t.size/2}px`})}function Wt(){if(!v||!z){const e=B(w).dotBehavior||{pushRadius:150};for(let n of j){const o=g-n.originalX,s=y-n.originalY;if(Math.sqrt(o*o+s*s)<e.pushRadius)return!0}}return z}function Tt(){const t=B(w),e=t.dotBehavior||{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200};let n=1/0;L.forEach(a=>{const m=g-a.x,d=y-a.y,u=Math.sqrt(m*m+d*d);u<n&&(n=u)});const o=n<e.dangerZone,s=o?1-n/e.dangerZone:0,i=rt,{distance:r,gemColorRgb:c}=Lt(),l=r<i&&c?1-r/i:0;j.forEach(a=>{const m=g-a.originalX,d=y-a.originalY,u=Math.sqrt(m*m+d*d);let f=0;u<e.fullVisibilityRadius?f=1:u<e.visibilityRadius&&(f=1-(u-e.fullVisibilityRadius)/(e.visibilityRadius-e.fullVisibilityRadius)),a.element.style.opacity=f;let h=1;const p=Math.max(e.scaleRadius||0,e.visibilityRadius||0);p>0&&(h=1+(1-Math.min(u,p)/p)*(e.maxScale-1));let C=Ot(t,ut);if(l>0&&c&&(C=Q(C,c,l)),o){const b=Et("#FF5C34")||{r:255,g:92,b:52};C=Q(C,b,s)}const X=o?.6:.5,S=`rgba(${C.r}, ${C.g}, ${C.b}, ${X})`;if(u<e.pushRadius){let b=(1-u/e.pushRadius)*e.maxPushDistance;if(o){const $=e.hazardJitterBoost||1.6,M=Math.pow(s,e.dangerShakeExponent)*e.dangerShakeAmount*$,k=(Math.random()-.5)*M,R=(Math.random()-.5)*M,P=e.baseJitterAmount||0,Y=(Math.random()-.5)*P,st=(Math.random()-.5)*P,F=Math.atan2(d,m),D=-Math.cos(F)*b+k+Y,H=-Math.sin(F)*b+R+st;a.element.style.transform=`translate(${D}px, ${H}px) scale(${h})`,a.element.classList.contains("dot-text")?a.element.style.color=S:a.element.style.backgroundColor=S}else{const $=Math.atan2(d,m),M=o&&e.baseJitterAmount||0,k=(Math.random()-.5)*M,R=(Math.random()-.5)*M,P=-Math.cos($)*b+k,Y=-Math.sin($)*b+R;a.element.style.transform=`translate(${P}px, ${Y}px) scale(${h})`,a.element.classList.contains("dot-text")?a.element.style.color=S:a.element.style.backgroundColor=S}}else{const b=o&&e.baseJitterAmount||0,$=(Math.random()-.5)*b,M=(Math.random()-.5)*b;a.element.style.transform=`translate(${$}px, ${M}px) scale(${h})`,a.element.classList.contains("dot-text")?a.element.style.color=S:a.element.style.backgroundColor=S}}),Yt(),requestAnimationFrame(Tt)}function Lt(){let t=1/0,e=null;I.forEach(o=>{if(!o.revealed&&!o.hasBeenHovered){const s=g-o.x,i=y-o.y,r=Math.sqrt(s*s+i*i);r<t&&(t=r,e=o)}}),e&&t<50?W!==e&&(W=e):W&&t>=50&&(W.hasBeenHovered=!0,W=null);let n=null;if(e){const o=e.element.querySelector("svg path"),s=o?o.getAttribute("fill"):null;n=s?Et(s):null,n||(n={...B(w).colors.targetColor})}return{distance:t,target:e,gemColorRgb:n}}function Jt(){return Lt().distance}function Q(t,e,n){return{r:Math.round(t.r+(e.r-t.r)*n),g:Math.round(t.g+(e.g-t.g)*n),b:Math.round(t.b+(e.b-t.b)*n)}}function wt(){const t=document.getElementById("target-count");t.textContent=it-O}function Nt(){const t=document.getElementById("hazard-count"),e=U(E);t.textContent=e.hazards;const n=t.closest(".legend-item");n&&(n.style.display=e.hazards===0?"none":"flex")}function St(){dt(E,w)}function nt(){!J||!q||(J.style.left=`${g}px`,J.style.top=`${y}px`,J.style.transform="translate(-50%, -50%)")}function Zt(){J=document.getElementById("custom-cursor")}function Gt(){const t=document.getElementById("start-title");if(!t)return;const e=t.textContent||"",n=()=>{const s=t.getBoundingClientRect();t.style.minHeight=`${s.height}px`,t.style.minWidth=`${s.width}px`,t.style.display="inline-block"},o=()=>{t.textContent="",t.style.visibility="visible";let s=0;const i=()=>{s<=e.length&&(t.textContent=e.slice(0,s),s+=1,setTimeout(i,80))};i()};document.fonts&&document.fonts.ready?document.fonts.ready.then(()=>{n(),o()}):(n(),o())}function pt(t,e,n=!1){const o=document.getElementById("instruction-text"),s=document.getElementById("instruction-overlay");if(!(!o||!s))if(s.style.display="block",s.style.opacity="1",s.classList.remove("dissolving"),n){o.innerHTML="";const i=document.createElement("div");i.innerHTML=t;const r=t;let c="",l="",a=0;const m=()=>{if(a<r.length){const d=r[a];let u=25;if(d==="<"){for(l="";a<r.length;){const f=r[a];if(l+=f,a++,f===">")break}c+=l,o.innerHTML=c}else c+=d,o.innerHTML=c,a++,d===`
`&&(u=500);setTimeout(m,u)}else setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",e&&e()},1e3)},1e3)};m()}else{o.textContent="";let i=0;const r=()=>{i<=t.length?(o.textContent=t.slice(0,i),i+=1,setTimeout(r,25)):setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",e&&e()},1e3)},1e3)};r()}}function bt(t){const e=document.getElementById("instruction-text"),n=document.getElementById("instruction-overlay");!e||!n||(n.style.display="block",n.style.opacity="1",n.classList.remove("dissolving"),e.textContent="Start!",setTimeout(()=>{n.classList.add("dissolving"),setTimeout(()=>{n.style.display="none",t&&t()},1e3)},800))}function Ut(){const t=document.getElementById("instruction-overlay");t&&(t.classList.add("dissolving"),setTimeout(()=>{t.style.display="none"},1e3))}function Vt(){const t=document.getElementById("classic-shapes-layer");if(!t)return;t.innerHTML="";const e=["▲","◆","•","✦","★","◊"],n=192;for(let o=0;o<n;o++){const s=document.createElement("div");s.className="classic-shape",s.textContent=e[Math.floor(Math.random()*e.length)];const i=Math.floor(Math.random()*26)+10,r=Math.random()*100,c=Math.random()*10+6,l=Math.random()*6,a=(Math.random()-.5)*40;s.style.fontSize=`${i}px`,s.style.left=`${r}%`,s.style.animationDuration=`${c}s`,s.style.animationDelay=`${l}s`,s.style.transform=`translateX(${a}px)`,t.appendChild(s)}}function jt(t){return{r:Math.min(255,t.r+120),g:Math.min(255,t.g+120),b:Math.min(255,t.b+120)}}function Ot(t,e){return t.dotGrid?.colorSource==="custom"&&t.dotGrid.color?{...t.dotGrid.color}:t.dotGrid?.colorSource==="hazard"?{...t.colors.hazardColor}:jt(e)}let ut={...T};function ot(){const t=Jt();let e=1/0;L.forEach(a=>{const m=g-a.x,d=y-a.y,u=Math.sqrt(m*m+d*d);u<e&&(e=u)});let n={...T};if(t<rt){const a=1-t/rt;n=Q(T,ct,a)}if(e<yt){const a=1-e/yt;n=Q(n,lt,a)}ut=n;const o=n,s={r:Math.max(0,n.r-20),g:Math.max(0,n.g-20),b:Math.max(0,n.b-20)},r=g/window.innerWidth*360,c=`rgb(${o.r}, ${o.g}, ${o.b})`,l=`rgb(${s.r}, ${s.g}, ${s.b})`;document.body.style.background=`linear-gradient(${r}deg, ${c} 0%, ${l} 100%)`}function _t(t,e,n="#FFD700"){const o=document.createElement("div");o.className="plus-one",o.textContent="+1",o.style.left=`${t}px`,o.style.top=`${e-30}px`,o.style.color=n,document.body.appendChild(o),setTimeout(()=>{o.remove()},1e3)}function mt(){L.forEach(t=>{const e=g-t.x,n=y-t.y;Math.sqrt(e*e+n*n)<40&&Kt()})}function Kt(){x=!1,v=!1,G(),L.forEach(o=>{o.element.classList.add("revealed")}),I.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0});const t=document.createElement("div");t.id="game-over-screen";const e=B(w);t.innerHTML=`
        <h1>${e.copy.gameOverTitle}</h1>
        <div class="score-actions-row">
            <button id="save-score-button">${e.copy.saveScoreCta}</button>
            <button id="restart-button">${e.copy.playAgainCta}</button>
        </div>
    `,document.body.appendChild(t),document.getElementById("restart-button").addEventListener("click",()=>{location.reload()});const n=document.getElementById("save-score-button");n&&n.addEventListener("click",()=>{xt(t)})}function Qt(){et+=1,x=!1,v=!1,G(),L.forEach(o=>{o.element.classList.add("revealed")}),I.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0}),document.body.style.background="linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)";const t=B(w),e=document.createElement("div");e.id="level-complete-screen",e.innerHTML=`
        <h1>Treasure found</h1>
        <div class="score-actions-row">
            <button id="next-level-button">${t.copy.nextLevelCta}</button>
        </div>
    `,document.body.appendChild(e);const n=document.getElementById("next-level-button");n&&n.addEventListener("click",()=>{e.remove(),document.body.classList.add("game-started"),E++,v=!1,z=!1,kt()})}function gt(){I.forEach(t=>{const e=g-t.x,n=y-t.y;if(Math.sqrt(e*e+n*n)<50&&!t.revealed){t.element.classList.add("revealed"),t.revealed=!0,O++,tt++,wt();let s="#FFD700";const i=t.element.querySelector("svg");if(i){const r=i.querySelector("path");r&&(s=r.getAttribute("fill")||"#FFD700")}_t(t.x,t.y,s),ot(),O>=it&&setTimeout(()=>{Qt()},500)}})}function kt(){v=!1,x=!1,z=!1,document.body.classList.add("game-started"),O=0,G();const t=`rgb(${T.r}, ${T.g}, ${T.b})`,e=`rgb(${Math.max(0,T.r-20)}, ${Math.max(0,T.g-20)}, ${Math.max(0,T.b-20)})`;document.body.style.background=`linear-gradient(135deg, ${t} 0%, ${e} 100%)`,ut={...T},document.getElementById("game-legend").style.display="flex",document.getElementById("level-indicator").style.display="block",ee(),I.forEach(n=>{Z(n.element),n.element.remove()}),L.forEach(n=>{Z(n.element),n.element.remove()}),$t(),Ct(),Mt(),Nt(),wt(),St(),dt(E,w),Zt(),g=window.innerWidth/2,y=window.innerHeight/2,nt(),E===1?(document.body.classList.add("instructions-active"),pt("Find the treasure",()=>{bt(()=>{v=!0,document.body.classList.remove("instructions-active")})},!0)):E===2?(document.body.classList.add("instructions-active"),pt(`Find the treasure
Be wary of <span class="instruction-jiggle" style="color: #351E28;">shadows</span>`,()=>{bt(()=>{v=!0,document.body.classList.remove("instructions-active")})},!0)):(Ut(),v=!0)}function ft(){!v||x||z||(z=!0,x=!0)}function te(t=1){const e=document.getElementById("start-screen");e.style.display="none",document.body.classList.add("game-started"),ne(B(w)),tt=0,et=0,_=!1,E=t,G(),kt(),Tt()}function ee(){const t=document.getElementById("level-display");t&&(t.textContent=`Level ${E}`)}document.addEventListener("mousemove",t=>{const e=g,n=y;g=t.clientX,y=t.clientY,nt(),v&&!z&&!q&&(Math.abs(g-e)>2||Math.abs(y-n)>2)&&Wt()&&ft(),x&&(ot(),gt(),mt())});document.addEventListener("mousedown",()=>{});document.addEventListener("mouseup",()=>{});document.addEventListener("touchstart",t=>{if(q||(q=!0,document.body.classList.add("touch-device")),x||v){t.preventDefault();const e=t.touches[0];g=e.clientX,y=e.clientY,nt(),v&&!z&&ft(),x&&(ot(),gt(),mt())}},{passive:!1});document.addEventListener("touchmove",t=>{if(q||(q=!0,document.body.classList.add("touch-device")),x||v){t.preventDefault();const e=t.touches[0];g=e.clientX,y=e.clientY,nt(),v&&!z&&ft(),x&&(ot(),gt(),mt())}},{passive:!1});document.addEventListener("touchend",t=>{(x||v)&&t.preventDefault()},{passive:!1});function ne(t){const e=t.colors.baseColor,n=`rgb(${e.r}, ${e.g}, ${e.b})`,o=`rgb(${Math.min(255,e.r+40)}, ${Math.min(255,e.g+40)}, ${Math.min(255,e.b+40)})`;document.body.style.background=`linear-gradient(135deg, ${n} 0%, ${o} 100%)`}const vt=document.getElementById("start-button");vt&&vt.addEventListener("click",()=>{w="classic";const t=B("classic");T={...t.colors.baseColor},ct={...t.colors.targetColor},lt={...t.colors.hazardColor},te(1)});window.addEventListener("resize",()=>{x&&($t(),I.forEach(t=>{Z(t.element),t.element.remove()}),L.forEach(t=>{Z(t.element),t.element.remove()}),Ct(),Mt(),St())});document.addEventListener("DOMContentLoaded",()=>{document.body.classList.remove("game-started"),G();const t=B("classic");T={...t.colors.baseColor},ct={...t.colors.targetColor},lt={...t.colors.hazardColor},At(t),dt(1,"classic"),Gt(),Vt(),oe()});async function oe(){try{const e=await(await fetch("version.json")).json(),n=document.getElementById("version-number");n&&e.version&&(n.textContent=`v${e.version}`)}catch(t){console.error("Failed to load version:",t)}}
