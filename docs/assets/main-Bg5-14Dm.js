import{h as Te,e as Le,d as Q,i as we}from"./instantdb-D5dQ5UkJ.js";/* empty css              */const N=document.getElementById("grid-container"),F=40,de=navigator.userAgent||"",ke=/Chrome/.test(de)&&!/Edg|OPR|Brave|Chromium/.test(de),Se=!ke;let W=[],f=-1e3,y=-1e3,S=[],Z=0,v=!1,p=!1,B=!1,R=null,E=[],C=1,te=3,j=0,O=0,G=!1,D=!1,H=null;function P(){document.body.classList.toggle("performance-mode",Se&&v)}const q={classic:{name:"Treasure Hunt",colors:{baseColor:{r:102,g:194,b:255},targetColor:{r:255,g:92,b:52},hazardColor:{r:53,g:30,b:40}},assets:{target:{src:"target-gem-01.svg",size:32,randomColor:!0},hazard:{src:"hazzard-octopus.svg",size:32}},copy:{gameTitle:"Treasure Hunt",themePrompt:"Select a theme:",levelPrompt:"Select a level to start:",levelButtonTemplate:"Level {level}",levelButtonSubtext:"{hazards} Hazards, {targets} Targets",legendTargetLabel:"Targets",legendHazardLabel:"Hazards",gameOverTitle:"Game Over!",gameOverMessage:"You were caught by a hazard!",levelCompleteTitle:"Level {level} complete!",levelCompleteMessage:"All targets found!",nextLevelCta:"Next Level",restartCta:"Restart Game",playAgainCta:"Play<br>Again",saveScoreCta:"Save<br>Score",finishRunCta:"Finish Run"},levelOverrides:{},dotGrid:{type:"symbols",characters:"▲◆•✦★◊",fontSize:20,fontFamily:"Arial, sans-serif",colorSource:"custom",color:{r:215,g:239,b:255}},dotBehavior:{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,baseJitterAmount:2,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200}}};let T="classic",M={...q.classic.colors.baseColor},ne={...q.classic.colors.targetColor},oe={...q.classic.colors.hazardColor};const ue=400,me=300;function w(e){return q[e]||q.classic}function X(e){e&&(e.innerHTML="",e.style.backgroundImage="",e.style.backgroundSize="",e.style.backgroundRepeat="",e.style.backgroundPosition="")}async function V(e,t){if(!e||!t||!t.src)return;const n=t.size||40;e.style.width=`${n}px`,e.style.height=`${n}px`,X(e);const o=t.src.endsWith(".svg"),s=t.src.match(/\.(png|jpg|jpeg|gif|webp)$/i);if(o){const a=e.classList.contains("target")||e.id==="target-legend-icon";t.randomColor&&a?fetch(t.src).then(i=>i.text()).then(i=>{e.innerHTML=i;const l=e.querySelector("svg");if(!l)return;l.style.width="100%",l.style.height="100%",l.style.display="block";const r=De();l.querySelectorAll("path").forEach(u=>{u.setAttribute("fill",r)});const d=(u=>{const g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return g?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16)}:null})(r);d&&(e.style.filter=`drop-shadow(0 0 8px rgba(${d.r}, ${d.g}, ${d.b}, 0.9)) drop-shadow(0 0 12px rgba(${d.r}, ${d.g}, ${d.b}, 0.6))`)}).catch(i=>{console.error("Failed to load SVG for color randomization:",i),e.style.backgroundImage=`url(${t.src})`,e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center"}):(e.style.backgroundImage=`url(${t.src})`,e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center");return}if(s){e.style.backgroundImage=`url(${t.src})`,e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center";return}}function Be(e){return e.replace(/\s+/g," ").trim()}async function ze(e){if(G)return{ok:!1,error:"Score already saved for this run."};if(!Le()||!Q)return{ok:!1,error:"Leaderboard is not configured yet."};const t=we(),n={nickname:e,totalTargets:j,levelsCompleted:O,createdAt:Date.now()};try{return await Q.transact(Q.tx.leaderboard_entries[t].update(n)),G=!0,{ok:!0,entryId:t}}catch{return{ok:!1,error:"Could not save score. Please try again."}}}function pe(e){const t=e.innerHTML;w(T),e.innerHTML=`
        <p style="font-size: 32px; color: #F4C2C2; margin-bottom: 20px;">Levels: ${O}<br>Treasures: ${j}</p>
        <form class="score-form">
            <label class="score-label" for="score-nickname-input" style="color: white;">Nickname</label>
            <input id="score-nickname-input" class="score-input" type="text" maxlength="20" />
            <div class="score-error" id="score-error-message"></div>
            <div class="score-actions-row">
                <button type="submit" class="score-submit">Save</button>
                <button type="button" class="score-cancel">Cancel</button>
            </div>
        </form>
    `;const n=e.querySelector("#score-nickname-input"),o=e.querySelector(".score-cancel"),s=e.querySelector(".score-submit"),a=e.querySelector(".score-form"),i=document.getElementById("score-error-message");n&&i&&n.addEventListener("input",()=>{i.textContent=""});const l=()=>{e.innerHTML=t;const r=e.querySelector("#restart-button"),c=e.querySelector("#save-score-button");r&&r.addEventListener("click",()=>{location.reload()}),c&&c.addEventListener("click",()=>{pe(e)})};Te?G&&(s.disabled=!0):s.disabled=!0,o.addEventListener("click",l),a.addEventListener("submit",async r=>{r.preventDefault();const c=document.getElementById("score-error-message"),m=Be(n.value||"");if(!m){c.textContent="Please add a nickname";return}if(m.length<2){c.textContent="Please add a nickname";return}if(m.length>20){c.textContent="Nickname is too long";return}c.textContent="",s.disabled=!0,o.disabled=!0,s.textContent="Saving...";const d=await ze(m);if(!d.ok){s.disabled=!1,o.disabled=!1,s.textContent="Save",c.textContent=d.error||"Could not save score";return}s.textContent="Saved!",setTimeout(()=>{window.location.href=`leaderboard.html?entry=${d.entryId}`},400)}),n&&n.focus()}function Ie(e){const t=document.getElementById("start-title");t&&(t.textContent=e.copy.gameTitle)}function se(e,t){const n=Y(e,t),o=document.getElementById("target-legend-icon"),s=document.getElementById("hazard-legend-icon");if(o&&n.assets.target){const a={...n.assets.target};a.randomColor=!0,V(o,a)}s&&n.assets.hazard&&V(s,n.assets.hazard)}function Y(e,t=T){const n=w(t),o=e===1?0:Math.min(e-1,8),s=e<=2?3:3+(e-2)*2;return{hazards:o,targets:s,assets:{target:n.assets.target,hazard:n.assets.hazard},movingHazards:!0}}function be(){const e=Y(C);E=[];const t=250,n=e.assets.hazard,o=n.size||40,s=o/2;for(let a=0;a<e.hazards;a++){const i=document.createElement("div");i.className="hazard",V(i,n);let l,r,c,m,d;do{l=Math.random()*(window.innerWidth-o*2)+o,r=Math.random()*(window.innerHeight-o*2)+o,c=E.some(b=>{const L=l-b.x,J=r-b.y;return Math.sqrt(L*L+J*J)<200});const $=l-f,k=r-y;m=Math.sqrt($*$+k*k)<t;const I=r<80&&l<200,x=r>window.innerHeight-100&&l<250;d=I||x}while(c||m||d);i.style.left=`${l-s}px`,i.style.top=`${r-s}px`,document.body.appendChild(i);const u=.5,g=C>2?u*Math.pow(1.1,C-2):u,h=Math.random()*Math.PI*2;E.push({element:i,x:l,y:r,size:o,velocityX:Math.cos(h)*g,velocityY:Math.sin(h)*g})}}function ve(){const e=Y(C);te=e.targets,S=[];const t=200,n=e.assets.target,o=n.size||40,s=o/2;for(let a=0;a<e.targets;a++){const i=document.createElement("div");i.className="target";const l=10;let r,c,m,d,u,g;do{r=Math.random()*(window.innerWidth-o*2)+o,c=Math.random()*(window.innerHeight-o*2)+o,m=E.some(x=>{const b=r-x.x,L=c-x.y;return Math.sqrt(b*b+L*L)<150}),u=S.some(x=>{const b=r-x.x,L=c-x.y;return Math.sqrt(b*b+L*L)<l});const h=r-f,$=c-y;d=Math.sqrt(h*h+$*$)<t;const z=c<80&&r<200,I=c>window.innerHeight-100&&r<250;g=z||I}while(m||d||u||g);i.style.left=`${r-s}px`,i.style.top=`${c-s}px`,document.body.appendChild(i),V(i,n).catch(h=>{console.error("Failed to apply asset to target:",h)}),S.push({element:i,x:r,y:c,size:o,revealed:!1,hasBeenHovered:!1})}}function Fe(e){return e[Math.floor(Math.random()*e.length)]}function De(){const e=["#FFFFFF","#FFBEE3","#FCFFBD","#F7C0C1","#E9F056","#D3B6F0","#BFEC78","#99F8FF","#78ECAA"];return e[Math.floor(Math.random()*e.length)]}function Re(e,t){if(!t){e.className="dot";return}if(t.type==="dots")e.className="dot";else{e.className="dot dot-text";const n=Fe(t.characters);e.textContent=n,t.fontSize&&(e.style.fontSize=`${t.fontSize}px`),t.fontFamily&&(e.style.fontFamily=t.fontFamily),t.fontWeight&&(e.style.fontWeight=t.fontWeight)}}function xe(){const e=window.innerWidth,t=window.innerHeight,n=Math.ceil(e/F)+1,o=Math.ceil(t/F)+1;N.style.gridTemplateColumns=`repeat(${n}, ${F}px)`,N.style.gridTemplateRows=`repeat(${o}, ${F}px)`,N.innerHTML="",W=[];const a=w(T).dotGrid;for(let i=0;i<o;i++)for(let l=0;l<n;l++){const r=document.createElement("div");Re(r,a);const c=l*F,m=i*F;W.push({element:r,originalX:c,originalY:m,currentX:c,currentY:m}),N.appendChild(r)}}function He(){Y(C),v&&E.forEach(e=>{e.x+=e.velocityX,e.y+=e.velocityY;const t=Math.max(40,e.size);(e.x<t||e.x>window.innerWidth-t)&&(e.velocityX*=-1,e.x=Math.max(t,Math.min(window.innerWidth-t,e.x))),(e.y<t||e.y>window.innerHeight-t)&&(e.velocityY*=-1,e.y=Math.max(t,Math.min(window.innerHeight-t,e.y))),e.element.style.left=`${e.x-e.size/2}px`,e.element.style.top=`${e.y-e.size/2}px`})}function Ae(){if(!p||!B){const t=w(T).dotBehavior||{pushRadius:150};for(let n of W){const o=f-n.originalX,s=y-n.originalY;if(Math.sqrt(o*o+s*s)<t.pushRadius)return!0}}return B}function Ce(){const e=w(T),t=e.dotBehavior||{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200};let n=1/0;E.forEach(a=>{const i=f-a.x,l=y-a.y,r=Math.sqrt(i*i+l*l);r<n&&(n=r)});const o=n<t.dangerZone,s=o?1-n/t.dangerZone:0;W.forEach(a=>{const i=f-a.originalX,l=y-a.originalY,r=Math.sqrt(i*i+l*l);let c=0;r<t.fullVisibilityRadius?c=1:r<t.visibilityRadius&&(c=1-(r-t.fullVisibilityRadius)/(t.visibilityRadius-t.fullVisibilityRadius)),a.element.style.opacity=c;let m=1;const d=Math.max(t.scaleRadius||0,t.visibilityRadius||0);if(d>0&&(m=1+(1-Math.min(r,d)/d)*(t.maxScale-1)),r<t.pushRadius){let u=(1-r/t.pushRadius)*t.maxPushDistance;if(o){const g=t.hazardJitterBoost||1.6,h=Math.pow(s,t.dangerShakeExponent)*t.dangerShakeAmount*g,$=(Math.random()-.5)*h,k=(Math.random()-.5)*h,z=t.baseJitterAmount||0,I=(Math.random()-.5)*z,x=(Math.random()-.5)*z,b=Math.atan2(l,i),L=-Math.cos(b)*u+$+I,J=-Math.sin(b)*u+k+x;a.element.style.transform=`translate(${L}px, ${J}px) scale(${m})`;const ce=Math.floor(s*220),K=ee(e,A),le=`rgba(${Math.min(255,K.r+80)}, ${Math.max(0,K.g-ce)}, ${Math.max(0,K.b-ce)}, 0.6)`;a.element.classList.contains("dot-text")?a.element.style.color=le:a.element.style.backgroundColor=le}else{const g=Math.atan2(l,i),h=o&&t.baseJitterAmount||0,$=(Math.random()-.5)*h,k=(Math.random()-.5)*h,z=-Math.cos(g)*u+$,I=-Math.sin(g)*u+k,x=ee(e,A),b=`rgba(${x.r}, ${x.g}, ${x.b}, 0.5)`;a.element.style.transform=`translate(${z}px, ${I}px) scale(${m})`,a.element.classList.contains("dot-text")?a.element.style.color=b:a.element.style.backgroundColor=b}}else{const u=ee(e,A),g=`rgba(${u.r}, ${u.g}, ${u.b}, 0.5)`,h=o&&t.baseJitterAmount||0,$=(Math.random()-.5)*h,k=(Math.random()-.5)*h;a.element.style.transform=`translate(${$}px, ${k}px) scale(${m})`,a.element.classList.contains("dot-text")?a.element.style.color=g:a.element.style.backgroundColor=g}}),He(),requestAnimationFrame(Ce)}function qe(){let e=1/0,t=null;return S.forEach(n=>{if(!n.revealed&&!n.hasBeenHovered){const o=f-n.x,s=y-n.y,a=Math.sqrt(o*o+s*s);a<e&&(e=a,t=n)}}),t&&e<50?R!==t&&(R=t):R&&e>=50&&(R.hasBeenHovered=!0,R=null),e}function ge(e,t,n){return{r:Math.round(e.r+(t.r-e.r)*n),g:Math.round(e.g+(t.g-e.g)*n),b:Math.round(e.b+(t.b-e.b)*n)}}function Me(){const e=document.getElementById("target-count");e.textContent=te-Z}function Xe(){const e=document.getElementById("hazard-count"),t=Y(C);e.textContent=t.hazards;const n=e.closest(".legend-item");n&&(n.style.display=t.hazards===0?"none":"flex")}function Ee(){se(C,T)}function U(){!H||!D||(H.style.left=`${f}px`,H.style.top=`${y}px`,H.style.transform="translate(-50%, -50%)")}function Pe(){H=document.getElementById("custom-cursor")}function Ye(){const e=document.getElementById("start-title");if(!e)return;const t=e.textContent||"",n=()=>{const s=e.getBoundingClientRect();e.style.minHeight=`${s.height}px`,e.style.minWidth=`${s.width}px`,e.style.display="inline-block"},o=()=>{e.textContent="",e.style.visibility="visible";let s=0;const a=()=>{s<=t.length&&(e.textContent=t.slice(0,s),s+=1,setTimeout(a,80))};a()};document.fonts&&document.fonts.ready?document.fonts.ready.then(()=>{n(),o()}):(n(),o())}function fe(e,t,n=!1){const o=document.getElementById("instruction-text"),s=document.getElementById("instruction-overlay");if(!(!o||!s))if(s.style.display="block",s.style.opacity="1",s.classList.remove("dissolving"),n){o.innerHTML="";const a=document.createElement("div");a.innerHTML=e;const i=e;let l="",r="",c=!1,m=0;const d=()=>{if(m<i.length){const u=i[m];u==="<"?(c=!0,r="<"):u===">"&&c?(r+=">",l+=r,r="",c=!1):c?r+=u:l+=u,o.innerHTML=l,m++,setTimeout(d,25)}else setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",t&&t()},1e3)},100)};d()}else{o.textContent="";let a=0;const i=()=>{a<=e.length?(o.textContent=e.slice(0,a),a+=1,setTimeout(i,25)):setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",t&&t()},1e3)},100)};i()}}function he(e){const t=document.getElementById("instruction-text"),n=document.getElementById("instruction-overlay");!t||!n||(n.style.display="block",n.style.opacity="1",n.classList.remove("dissolving"),t.textContent="Start!",setTimeout(()=>{n.classList.add("dissolving"),setTimeout(()=>{n.style.display="none",e&&e()},1e3)},800))}function Je(){const e=document.getElementById("instruction-overlay");e&&(e.classList.add("dissolving"),setTimeout(()=>{e.style.display="none"},1e3))}function Ne(){const e=document.getElementById("classic-shapes-layer");if(!e)return;e.innerHTML="";const t=["▲","◆","•","✦","★","◊"],n=192;for(let o=0;o<n;o++){const s=document.createElement("div");s.className="classic-shape",s.textContent=t[Math.floor(Math.random()*t.length)];const a=Math.floor(Math.random()*26)+10,i=Math.random()*100,l=Math.random()*10+6,r=Math.random()*6,c=(Math.random()-.5)*40;s.style.fontSize=`${a}px`,s.style.left=`${i}%`,s.style.animationDuration=`${l}s`,s.style.animationDelay=`${r}s`,s.style.transform=`translateX(${c}px)`,e.appendChild(s)}}function We(e){return{r:Math.min(255,e.r+120),g:Math.min(255,e.g+120),b:Math.min(255,e.b+120)}}function ee(e,t){return e.dotGrid?.colorSource==="custom"&&e.dotGrid.color?{...e.dotGrid.color}:e.dotGrid?.colorSource==="hazard"?{...e.colors.hazardColor}:We(t)}let A={...M};function _(){const e=qe();let t=1/0;E.forEach(c=>{const m=f-c.x,d=y-c.y,u=Math.sqrt(m*m+d*d);u<t&&(t=u)});let n={...M};if(e<ue){const c=1-e/ue;n=ge(M,ne,c)}if(t<me){const c=1-t/me;n=ge(n,oe,c)}A=n;const o=n,s={r:Math.max(0,n.r-20),g:Math.max(0,n.g-20),b:Math.max(0,n.b-20)},i=f/window.innerWidth*360,l=`rgb(${o.r}, ${o.g}, ${o.b})`,r=`rgb(${s.r}, ${s.g}, ${s.b})`;document.body.style.background=`linear-gradient(${i}deg, ${l} 0%, ${r} 100%)`}function Ze(e,t,n="#FFD700"){const o=document.createElement("div");o.className="plus-one",o.textContent="+1",o.style.left=`${e}px`,o.style.top=`${t-30}px`,o.style.color=n,document.body.appendChild(o),setTimeout(()=>{o.remove()},1e3)}function ae(){E.forEach(e=>{const t=f-e.x,n=y-e.y;Math.sqrt(t*t+n*n)<40&&Ge()})}function Ge(){v=!1,p=!1,P(),E.forEach(o=>{o.element.classList.add("revealed")}),S.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0});const e=document.createElement("div");e.id="game-over-screen";const t=w(T);e.innerHTML=`
        <h1>${t.copy.gameOverTitle}</h1>
        <div class="score-actions-row">
            <button id="save-score-button">${t.copy.saveScoreCta}</button>
            <button id="restart-button">${t.copy.playAgainCta}</button>
        </div>
    `,document.body.appendChild(e),document.getElementById("restart-button").addEventListener("click",()=>{location.reload()});const n=document.getElementById("save-score-button");n&&n.addEventListener("click",()=>{pe(e)})}function Ve(){O+=1,v=!1,p=!1,P(),E.forEach(o=>{o.element.classList.add("revealed")}),S.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0}),document.body.style.background="linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)";const e=w(T),t=document.createElement("div");t.id="level-complete-screen",t.innerHTML=`
        <h1>Treasure found</h1>
        <div class="score-actions-row">
            <button id="next-level-button">${e.copy.nextLevelCta}</button>
        </div>
    `,document.body.appendChild(t);const n=document.getElementById("next-level-button");n&&n.addEventListener("click",()=>{t.remove(),document.body.classList.add("game-started"),C++,p=!1,B=!1,$e()})}function re(){S.forEach(e=>{const t=f-e.x,n=y-e.y;if(Math.sqrt(t*t+n*n)<50&&!e.revealed){e.element.classList.add("revealed"),e.revealed=!0,Z++,j++,Me();let s="#FFD700";const a=e.element.querySelector("svg");if(a){const i=a.querySelector("path");i&&(s=i.getAttribute("fill")||"#FFD700")}Ze(e.x,e.y,s),_(),Z>=te&&setTimeout(()=>{Ve()},500)}})}function $e(){p=!1,v=!1,B=!1,document.body.classList.add("game-started"),Z=0,P();const e=`rgb(${M.r}, ${M.g}, ${M.b})`,t=`rgb(${Math.max(0,M.r-20)}, ${Math.max(0,M.g-20)}, ${Math.max(0,M.b-20)})`;document.body.style.background=`linear-gradient(135deg, ${e} 0%, ${t} 100%)`,A={...M},document.getElementById("game-legend").style.display="flex",document.getElementById("level-indicator").style.display="block",Oe(),S.forEach(n=>{X(n.element),n.element.remove()}),E.forEach(n=>{X(n.element),n.element.remove()}),xe(),be(),ve(),Xe(),Me(),Ee(),se(C,T),Pe(),f=window.innerWidth/2,y=window.innerHeight/2,U(),C===1?(document.body.classList.add("instructions-active"),fe(`Find all the Treasure!
<span style="color: #FF5C34;">Red</span> = treasure is near`,()=>{he(()=>{p=!0,document.body.classList.remove("instructions-active")})},!0)):C===2?(document.body.classList.add("instructions-active"),fe(`Find all the Treasure!
<span style="color: #FF5C34;">Red</span> = treasure is near
<span style="color: #351E28;">Dark</span> = danger is near`,()=>{he(()=>{p=!0,document.body.classList.remove("instructions-active")})},!0)):(Je(),p=!0)}function ie(){!p||v||B||(B=!0,v=!0)}function je(e=1){const t=document.getElementById("start-screen");t.style.display="none",document.body.classList.add("game-started"),Ue(w(T)),j=0,O=0,G=!1,C=e,P(),$e(),Ce()}function Oe(){const e=document.getElementById("level-display");e&&(e.textContent=`Level ${C}`)}document.addEventListener("mousemove",e=>{const t=f,n=y;f=e.clientX,y=e.clientY,U(),p&&!B&&!D&&(Math.abs(f-t)>2||Math.abs(y-n)>2)&&Ae()&&ie(),v&&(_(),re(),ae())});document.addEventListener("mousedown",()=>{});document.addEventListener("mouseup",()=>{});document.addEventListener("touchstart",e=>{if(D||(D=!0,document.body.classList.add("touch-device")),v||p){e.preventDefault();const t=e.touches[0];f=t.clientX,y=t.clientY,U(),p&&!B&&ie(),v&&(_(),re(),ae())}},{passive:!1});document.addEventListener("touchmove",e=>{if(D||(D=!0,document.body.classList.add("touch-device")),v||p){e.preventDefault();const t=e.touches[0];f=t.clientX,y=t.clientY,U(),p&&!B&&ie(),v&&(_(),re(),ae())}},{passive:!1});document.addEventListener("touchend",e=>{(v||p)&&e.preventDefault()},{passive:!1});function Ue(e){const t=e.colors.baseColor,n=`rgb(${t.r}, ${t.g}, ${t.b})`,o=`rgb(${Math.min(255,t.r+40)}, ${Math.min(255,t.g+40)}, ${Math.min(255,t.b+40)})`;document.body.style.background=`linear-gradient(135deg, ${n} 0%, ${o} 100%)`}const ye=document.getElementById("start-button");ye&&ye.addEventListener("click",()=>{T="classic";const e=w("classic");M={...e.colors.baseColor},ne={...e.colors.targetColor},oe={...e.colors.hazardColor},je(1)});window.addEventListener("resize",()=>{v&&(xe(),S.forEach(e=>{X(e.element),e.element.remove()}),E.forEach(e=>{X(e.element),e.element.remove()}),be(),ve(),Ee())});document.addEventListener("DOMContentLoaded",()=>{document.body.classList.remove("game-started"),P();const e=w("classic");M={...e.colors.baseColor},ne={...e.colors.targetColor},oe={...e.colors.hazardColor},Ie(e),se(1,"classic"),Ye(),Ne(),_e()});async function _e(){try{const t=await(await fetch("version.json")).json(),n=document.getElementById("version-number");n&&t.version&&(n.textContent=`v${t.version}`)}catch(e){console.error("Failed to load version:",e)}}
