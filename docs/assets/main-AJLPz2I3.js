import{h as St,e as Bt,d as st,i as It}from"./instantdb-D5dQ5UkJ.js";/* empty css              */const j=document.getElementById("grid-container"),D=40,gt=navigator.userAgent||"",zt=/Chrome/.test(gt)&&!/Edg|OPR|Brave|Chromium/.test(gt),Ft=!zt;let O=[],y=-1e3,p=-1e3,S=[],_=0,v=!1,b=!1,B=!1,P=null,M=[],x=1,rt=3,tt=0,et=0,K=!1,H=!1,Y=null;function Z(){document.body.classList.toggle("performance-mode",Ft&&v)}const J={classic:{name:"Treasure Hunt",colors:{baseColor:{r:102,g:194,b:255},targetColor:{r:255,g:92,b:52},hazardColor:{r:53,g:30,b:40}},assets:{target:{src:"target-gem-01.svg",size:32,randomColor:!0},hazard:{src:"hazzard-octopus.svg",size:32}},copy:{gameTitle:"Treasure Hunt",themePrompt:"Select a theme:",levelPrompt:"Select a level to start:",levelButtonTemplate:"Level {level}",levelButtonSubtext:"{hazards} Hazards, {targets} Targets",legendTargetLabel:"Targets",legendHazardLabel:"Hazards",gameOverTitle:"Game Over!",gameOverMessage:"You were caught by a hazard!",levelCompleteTitle:"Level {level} complete!",levelCompleteMessage:"All targets found!",nextLevelCta:"Next Level",restartCta:"Restart Game",playAgainCta:"Play<br>Again",saveScoreCta:"Save<br>Score",finishRunCta:"Finish Run"},levelOverrides:{},dotGrid:{type:"symbols",characters:"▲◆•✦★◊",fontSize:20,fontFamily:"Arial, sans-serif",colorSource:"custom",color:{r:215,g:239,b:255}},dotBehavior:{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,baseJitterAmount:2,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200}}};let T="classic",C={...J.classic.colors.baseColor},it={...J.classic.colors.targetColor},ct={...J.classic.colors.hazardColor};const ft=400,ht=300;function w(t){return J[t]||J.classic}function N(t){t&&(t.innerHTML="",t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundRepeat="",t.style.backgroundPosition="")}async function Q(t,e){if(!t||!e||!e.src)return;const n=e.size||40;t.style.width=`${n}px`,t.style.height=`${n}px`,N(t);const o=e.src.endsWith(".svg"),s=e.src.match(/\.(png|jpg|jpeg|gif|webp)$/i);if(o){const a=t.classList.contains("target")||t.id==="target-legend-icon";e.randomColor&&a?fetch(e.src).then(r=>r.text()).then(r=>{t.innerHTML=r;const l=t.querySelector("svg");if(!l)return;l.style.width="100%",l.style.height="100%",l.style.display="block";const i=qt();l.querySelectorAll("path").forEach(d=>{d.setAttribute("fill",i)});const u=(d=>{const f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return f?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null})(i);u&&(t.style.filter=`drop-shadow(0 0 8px rgba(${u.r}, ${u.g}, ${u.b}, 0.9)) drop-shadow(0 0 12px rgba(${u.r}, ${u.g}, ${u.b}, 0.6))`)}).catch(r=>{console.error("Failed to load SVG for color randomization:",r),t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center"}):(t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center");return}if(s){t.style.backgroundImage=`url(${e.src})`,t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center";return}}function Dt(t){return t.replace(/\s+/g," ").trim()}async function Ht(t){if(K)return{ok:!1,error:"Score already saved for this run."};if(!Bt()||!st)return{ok:!1,error:"Leaderboard is not configured yet."};const e=It(),n={nickname:t,totalTargets:tt,levelsCompleted:et,createdAt:Date.now()};try{return await st.transact(st.tx.leaderboard_entries[e].update(n)),K=!0,{ok:!0,entryId:e}}catch{return{ok:!1,error:"Could not save score. Please try again."}}}function xt(t){const e=t.innerHTML;w(T),t.innerHTML=`
        <p style="font-size: 32px; color: #F4C2C2; margin-bottom: 20px;">Levels: ${et}<br>Treasures: ${tt}</p>
        <form class="score-form">
            <label class="score-label" for="score-nickname-input" style="color: white;">Nickname</label>
            <input id="score-nickname-input" class="score-input" type="text" maxlength="20" />
            <div class="score-error" id="score-error-message"></div>
            <div class="score-actions-row">
                <button type="submit" class="score-submit">Save</button>
                <button type="button" class="score-cancel">Cancel</button>
            </div>
        </form>
    `;const n=t.querySelector("#score-nickname-input"),o=t.querySelector(".score-cancel"),s=t.querySelector(".score-submit"),a=t.querySelector(".score-form"),r=document.getElementById("score-error-message");n&&r&&n.addEventListener("input",()=>{r.textContent=""});const l=()=>{t.innerHTML=e;const i=t.querySelector("#restart-button"),c=t.querySelector("#save-score-button");i&&i.addEventListener("click",()=>{location.reload()}),c&&c.addEventListener("click",()=>{xt(t)})};St?K&&(s.disabled=!0):s.disabled=!0,o.addEventListener("click",l),a.addEventListener("submit",async i=>{i.preventDefault();const c=document.getElementById("score-error-message"),m=Dt(n.value||"");if(!m){c.textContent="Please add a nickname";return}if(m.length<2){c.textContent="Please add a nickname";return}if(m.length>20){c.textContent="Nickname is too long";return}c.textContent="",s.disabled=!0,o.disabled=!0,s.textContent="Saving...";const u=await Ht(m);if(!u.ok){s.disabled=!1,o.disabled=!1,s.textContent="Save",c.textContent=u.error||"Could not save score";return}s.textContent="Saved!",setTimeout(()=>{window.location.href=`leaderboard.html?entry=${u.entryId}`},400)}),n&&n.focus()}function Rt(t){const e=document.getElementById("start-title");e&&(e.textContent=t.copy.gameTitle)}function lt(t,e){const n=G(t,e),o=document.getElementById("target-legend-icon"),s=document.getElementById("hazard-legend-icon");if(o&&n.assets.target){const a={...n.assets.target};a.randomColor=!0,Q(o,a)}s&&n.assets.hazard&&Q(s,n.assets.hazard)}function G(t,e=T){const n=w(e),o=t===1?0:Math.min(t-1,8),s=t<=2?3:3+(t-2)*2;return{hazards:o,targets:s,assets:{target:n.assets.target,hazard:n.assets.hazard},movingHazards:!0}}function Ct(){const t=G(x);M=[];const e=250,n=t.assets.hazard,o=n.size||40,s=o/2;for(let a=0;a<t.hazards;a++){const r=document.createElement("div");r.className="hazard",Q(r,n);let l,i,c,m,u;do{l=Math.random()*(window.innerWidth-o*2)+o,i=Math.random()*(window.innerHeight-o*2)+o,c=M.some($=>{const F=l-$.x,k=i-$.y;return Math.sqrt(F*F+k*k)<200});const h=l-y,E=i-p;m=Math.sqrt(h*h+E*E)<e;const z=i<80&&l<200,L=i>window.innerHeight-100&&l<250;u=z||L}while(c||m||u);r.style.left=`${l-s}px`,r.style.top=`${i-s}px`,document.body.appendChild(r);const d=.5,f=x>2?d*Math.pow(1.1,x-2):d,g=Math.random()*Math.PI*2;M.push({element:r,x:l,y:i,size:o,velocityX:Math.cos(g)*f,velocityY:Math.sin(g)*f})}}function Mt(){const t=G(x);rt=t.targets,S=[];const e=window.innerWidth<640,n=e?80:200,o=e?80:150,s=e?60:80,a=e?120:200,r=e?80:100,l=e?150:250,i=t.assets.target,c=i.size||40,m=c/2;for(let u=0;u<t.targets;u++){const d=document.createElement("div");d.className="target";const f=10;let g,h,E,I,z,L,$=0;const F=500;do{g=Math.random()*(window.innerWidth-c*2)+c,h=Math.random()*(window.innerHeight-c*2)+c,E=M.some(A=>{const q=g-A.x,X=h-A.y;return Math.sqrt(q*q+X*X)<o}),z=S.some(A=>{const q=g-A.x,X=h-A.y;return Math.sqrt(q*q+X*X)<f});const k=g-y,R=h-p;I=Math.sqrt(k*k+R*R)<n;const V=h<s&&g<a,kt=h>window.innerHeight-r&&g<l;if(L=V||kt,$++,$>F){console.warn(`Could not find valid position for target ${u+1} after ${F} attempts, placing anyway`);break}}while(E||I||z||L);d.style.left=`${g-m}px`,d.style.top=`${h-m}px`,document.body.appendChild(d),Q(d,i).catch(k=>{console.error("Failed to apply asset to target:",k)}),S.push({element:d,x:g,y:h,size:c,revealed:!1,hasBeenHovered:!1})}}function At(t){return t[Math.floor(Math.random()*t.length)]}function qt(){const t=["#FFFFFF","#FFBEE3","#FCFFBD","#F7C0C1","#E9F056","#D3B6F0","#BFEC78","#99F8FF","#78ECAA"];return t[Math.floor(Math.random()*t.length)]}function Xt(t,e){if(!e){t.className="dot";return}if(e.type==="dots")t.className="dot";else{t.className="dot dot-text";const n=At(e.characters);t.textContent=n,e.fontSize&&(t.style.fontSize=`${e.fontSize}px`),e.fontFamily&&(t.style.fontFamily=e.fontFamily),e.fontWeight&&(t.style.fontWeight=e.fontWeight)}}function Et(){const t=window.innerWidth,e=window.innerHeight,n=Math.ceil(t/D)+1,o=Math.ceil(e/D)+1;j.style.gridTemplateColumns=`repeat(${n}, ${D}px)`,j.style.gridTemplateRows=`repeat(${o}, ${D}px)`,j.innerHTML="",O=[];const a=w(T).dotGrid;for(let r=0;r<o;r++)for(let l=0;l<n;l++){const i=document.createElement("div");Xt(i,a);const c=l*D,m=r*D;O.push({element:i,originalX:c,originalY:m,currentX:c,currentY:m}),j.appendChild(i)}}function Pt(){G(x),v&&M.forEach(t=>{t.x+=t.velocityX,t.y+=t.velocityY;const e=Math.max(40,t.size);(t.x<e||t.x>window.innerWidth-e)&&(t.velocityX*=-1,t.x=Math.max(e,Math.min(window.innerWidth-e,t.x))),(t.y<e||t.y>window.innerHeight-e)&&(t.velocityY*=-1,t.y=Math.max(e,Math.min(window.innerHeight-e,t.y))),t.element.style.left=`${t.x-t.size/2}px`,t.element.style.top=`${t.y-t.size/2}px`})}function Yt(){if(!b||!B){const e=w(T).dotBehavior||{pushRadius:150};for(let n of O){const o=y-n.originalX,s=p-n.originalY;if(Math.sqrt(o*o+s*s)<e.pushRadius)return!0}}return B}function $t(){const t=w(T),e=t.dotBehavior||{pushRadius:150,maxPushDistance:60,scaleRadius:150,maxScale:1.5,visibilityRadius:250,fullVisibilityRadius:100,dangerShakeAmount:20,dangerShakeExponent:1.5,dangerZone:200};let n=1/0;M.forEach(a=>{const r=y-a.x,l=p-a.y,i=Math.sqrt(r*r+l*l);i<n&&(n=i)});const o=n<e.dangerZone,s=o?1-n/e.dangerZone:0;O.forEach(a=>{const r=y-a.originalX,l=p-a.originalY,i=Math.sqrt(r*r+l*l);let c=0;i<e.fullVisibilityRadius?c=1:i<e.visibilityRadius&&(c=1-(i-e.fullVisibilityRadius)/(e.visibilityRadius-e.fullVisibilityRadius)),a.element.style.opacity=c;let m=1;const u=Math.max(e.scaleRadius||0,e.visibilityRadius||0);if(u>0&&(m=1+(1-Math.min(i,u)/u)*(e.maxScale-1)),i<e.pushRadius){let d=(1-i/e.pushRadius)*e.maxPushDistance;if(o){const f=e.hazardJitterBoost||1.6,g=Math.pow(s,e.dangerShakeExponent)*e.dangerShakeAmount*f,h=(Math.random()-.5)*g,E=(Math.random()-.5)*g,I=e.baseJitterAmount||0,z=(Math.random()-.5)*I,L=(Math.random()-.5)*I,$=Math.atan2(l,r),F=-Math.cos($)*d+h+z,k=-Math.sin($)*d+E+L;a.element.style.transform=`translate(${F}px, ${k}px) scale(${m})`;const R=Math.floor(s*220),U=at(t,W),V=`rgba(${Math.min(255,U.r+80)}, ${Math.max(0,U.g-R)}, ${Math.max(0,U.b-R)}, 0.6)`;a.element.classList.contains("dot-text")?a.element.style.color=V:a.element.style.backgroundColor=V}else{const f=Math.atan2(l,r),g=o&&e.baseJitterAmount||0,h=(Math.random()-.5)*g,E=(Math.random()-.5)*g,I=-Math.cos(f)*d+h,z=-Math.sin(f)*d+E,L=at(t,W),$=`rgba(${L.r}, ${L.g}, ${L.b}, 0.5)`;a.element.style.transform=`translate(${I}px, ${z}px) scale(${m})`,a.element.classList.contains("dot-text")?a.element.style.color=$:a.element.style.backgroundColor=$}}else{const d=at(t,W),f=`rgba(${d.r}, ${d.g}, ${d.b}, 0.5)`,g=o&&e.baseJitterAmount||0,h=(Math.random()-.5)*g,E=(Math.random()-.5)*g;a.element.style.transform=`translate(${h}px, ${E}px) scale(${m})`,a.element.classList.contains("dot-text")?a.element.style.color=f:a.element.style.backgroundColor=f}}),Pt(),requestAnimationFrame($t)}function Wt(){let t=1/0,e=null;return S.forEach(n=>{if(!n.revealed&&!n.hasBeenHovered){const o=y-n.x,s=p-n.y,a=Math.sqrt(o*o+s*s);a<t&&(t=a,e=n)}}),e&&t<50?P!==e&&(P=e):P&&t>=50&&(P.hasBeenHovered=!0,P=null),t}function yt(t,e,n){return{r:Math.round(t.r+(e.r-t.r)*n),g:Math.round(t.g+(e.g-t.g)*n),b:Math.round(t.b+(e.b-t.b)*n)}}function Tt(){const t=document.getElementById("target-count");t.textContent=rt-_}function Jt(){const t=document.getElementById("hazard-count"),e=G(x);t.textContent=e.hazards;const n=t.closest(".legend-item");n&&(n.style.display=e.hazards===0?"none":"flex")}function Lt(){lt(x,T)}function nt(){!Y||!H||(Y.style.left=`${y}px`,Y.style.top=`${p}px`,Y.style.transform="translate(-50%, -50%)")}function Nt(){Y=document.getElementById("custom-cursor")}function Zt(){const t=document.getElementById("start-title");if(!t)return;const e=t.textContent||"",n=()=>{const s=t.getBoundingClientRect();t.style.minHeight=`${s.height}px`,t.style.minWidth=`${s.width}px`,t.style.display="inline-block"},o=()=>{t.textContent="",t.style.visibility="visible";let s=0;const a=()=>{s<=e.length&&(t.textContent=e.slice(0,s),s+=1,setTimeout(a,80))};a()};document.fonts&&document.fonts.ready?document.fonts.ready.then(()=>{n(),o()}):(n(),o())}function pt(t,e,n=!1){const o=document.getElementById("instruction-text"),s=document.getElementById("instruction-overlay");if(!(!o||!s))if(s.style.display="block",s.style.opacity="1",s.classList.remove("dissolving"),n){o.innerHTML="";const a=document.createElement("div");a.innerHTML=t;const r=t;let l="",i="",c=!1,m=0;const u=()=>{if(m<r.length){const d=r[m];d==="<"?(c=!0,i="<"):d===">"&&c?(i+=">",l+=i,i="",c=!1):c?i+=d:l+=d,o.innerHTML=l,m++,setTimeout(u,25)}else setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",e&&e()},1e3)},100)};u()}else{o.textContent="";let a=0;const r=()=>{a<=t.length?(o.textContent=t.slice(0,a),a+=1,setTimeout(r,25)):setTimeout(()=>{s.classList.add("dissolving"),setTimeout(()=>{s.style.display="none",e&&e()},1e3)},100)};r()}}function bt(t){const e=document.getElementById("instruction-text"),n=document.getElementById("instruction-overlay");!e||!n||(n.style.display="block",n.style.opacity="1",n.classList.remove("dissolving"),e.textContent="Start!",setTimeout(()=>{n.classList.add("dissolving"),setTimeout(()=>{n.style.display="none",t&&t()},1e3)},800))}function Gt(){const t=document.getElementById("instruction-overlay");t&&(t.classList.add("dissolving"),setTimeout(()=>{t.style.display="none"},1e3))}function Ut(){const t=document.getElementById("classic-shapes-layer");if(!t)return;t.innerHTML="";const e=["▲","◆","•","✦","★","◊"],n=192;for(let o=0;o<n;o++){const s=document.createElement("div");s.className="classic-shape",s.textContent=e[Math.floor(Math.random()*e.length)];const a=Math.floor(Math.random()*26)+10,r=Math.random()*100,l=Math.random()*10+6,i=Math.random()*6,c=(Math.random()-.5)*40;s.style.fontSize=`${a}px`,s.style.left=`${r}%`,s.style.animationDuration=`${l}s`,s.style.animationDelay=`${i}s`,s.style.transform=`translateX(${c}px)`,t.appendChild(s)}}function Vt(t){return{r:Math.min(255,t.r+120),g:Math.min(255,t.g+120),b:Math.min(255,t.b+120)}}function at(t,e){return t.dotGrid?.colorSource==="custom"&&t.dotGrid.color?{...t.dotGrid.color}:t.dotGrid?.colorSource==="hazard"?{...t.colors.hazardColor}:Vt(e)}let W={...C};function ot(){const t=Wt();let e=1/0;M.forEach(c=>{const m=y-c.x,u=p-c.y,d=Math.sqrt(m*m+u*u);d<e&&(e=d)});let n={...C};if(t<ft){const c=1-t/ft;n=yt(C,it,c)}if(e<ht){const c=1-e/ht;n=yt(n,ct,c)}W=n;const o=n,s={r:Math.max(0,n.r-20),g:Math.max(0,n.g-20),b:Math.max(0,n.b-20)},r=y/window.innerWidth*360,l=`rgb(${o.r}, ${o.g}, ${o.b})`,i=`rgb(${s.r}, ${s.g}, ${s.b})`;document.body.style.background=`linear-gradient(${r}deg, ${l} 0%, ${i} 100%)`}function jt(t,e,n="#FFD700"){const o=document.createElement("div");o.className="plus-one",o.textContent="+1",o.style.left=`${t}px`,o.style.top=`${e-30}px`,o.style.color=n,document.body.appendChild(o),setTimeout(()=>{o.remove()},1e3)}function dt(){M.forEach(t=>{const e=y-t.x,n=p-t.y;Math.sqrt(e*e+n*n)<40&&Ot()})}function Ot(){v=!1,b=!1,Z(),M.forEach(o=>{o.element.classList.add("revealed")}),S.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0});const t=document.createElement("div");t.id="game-over-screen";const e=w(T);t.innerHTML=`
        <h1>${e.copy.gameOverTitle}</h1>
        <div class="score-actions-row">
            <button id="save-score-button">${e.copy.saveScoreCta}</button>
            <button id="restart-button">${e.copy.playAgainCta}</button>
        </div>
    `,document.body.appendChild(t),document.getElementById("restart-button").addEventListener("click",()=>{location.reload()});const n=document.getElementById("save-score-button");n&&n.addEventListener("click",()=>{xt(t)})}function _t(){et+=1,v=!1,b=!1,Z(),M.forEach(o=>{o.element.classList.add("revealed")}),S.forEach(o=>{o.element.classList.add("revealed"),o.revealed=!0}),document.body.style.background="linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)";const t=w(T),e=document.createElement("div");e.id="level-complete-screen",e.innerHTML=`
        <h1>Treasure found</h1>
        <div class="score-actions-row">
            <button id="next-level-button">${t.copy.nextLevelCta}</button>
        </div>
    `,document.body.appendChild(e);const n=document.getElementById("next-level-button");n&&n.addEventListener("click",()=>{e.remove(),document.body.classList.add("game-started"),x++,b=!1,B=!1,wt()})}function ut(){S.forEach(t=>{const e=y-t.x,n=p-t.y;if(Math.sqrt(e*e+n*n)<50&&!t.revealed){t.element.classList.add("revealed"),t.revealed=!0,_++,tt++,Tt();let s="#FFD700";const a=t.element.querySelector("svg");if(a){const r=a.querySelector("path");r&&(s=r.getAttribute("fill")||"#FFD700")}jt(t.x,t.y,s),ot(),_>=rt&&setTimeout(()=>{_t()},500)}})}function wt(){b=!1,v=!1,B=!1,document.body.classList.add("game-started"),_=0,Z();const t=`rgb(${C.r}, ${C.g}, ${C.b})`,e=`rgb(${Math.max(0,C.r-20)}, ${Math.max(0,C.g-20)}, ${Math.max(0,C.b-20)})`;document.body.style.background=`linear-gradient(135deg, ${t} 0%, ${e} 100%)`,W={...C},document.getElementById("game-legend").style.display="flex",document.getElementById("level-indicator").style.display="block",Qt(),S.forEach(n=>{N(n.element),n.element.remove()}),M.forEach(n=>{N(n.element),n.element.remove()}),Et(),Ct(),Mt(),Jt(),Tt(),Lt(),lt(x,T),Nt(),y=window.innerWidth/2,p=window.innerHeight/2,nt(),x===1?(document.body.classList.add("instructions-active"),pt(`Find all the Treasure!
<span style="color: #FF5C34;">Red</span> = treasure is near`,()=>{bt(()=>{b=!0,document.body.classList.remove("instructions-active")})},!0)):x===2?(document.body.classList.add("instructions-active"),pt(`Find all the Treasure!
<span style="color: #FF5C34;">Red</span> = treasure is near
<span style="color: #351E28;">Dark</span> = danger is near`,()=>{bt(()=>{b=!0,document.body.classList.remove("instructions-active")})},!0)):(Gt(),b=!0)}function mt(){!b||v||B||(B=!0,v=!0)}function Kt(t=1){const e=document.getElementById("start-screen");e.style.display="none",document.body.classList.add("game-started"),te(w(T)),tt=0,et=0,K=!1,x=t,Z(),wt(),$t()}function Qt(){const t=document.getElementById("level-display");t&&(t.textContent=`Level ${x}`)}document.addEventListener("mousemove",t=>{const e=y,n=p;y=t.clientX,p=t.clientY,nt(),b&&!B&&!H&&(Math.abs(y-e)>2||Math.abs(p-n)>2)&&Yt()&&mt(),v&&(ot(),ut(),dt())});document.addEventListener("mousedown",()=>{});document.addEventListener("mouseup",()=>{});document.addEventListener("touchstart",t=>{if(H||(H=!0,document.body.classList.add("touch-device")),v||b){t.preventDefault();const e=t.touches[0];y=e.clientX,p=e.clientY,nt(),b&&!B&&mt(),v&&(ot(),ut(),dt())}},{passive:!1});document.addEventListener("touchmove",t=>{if(H||(H=!0,document.body.classList.add("touch-device")),v||b){t.preventDefault();const e=t.touches[0];y=e.clientX,p=e.clientY,nt(),b&&!B&&mt(),v&&(ot(),ut(),dt())}},{passive:!1});document.addEventListener("touchend",t=>{(v||b)&&t.preventDefault()},{passive:!1});function te(t){const e=t.colors.baseColor,n=`rgb(${e.r}, ${e.g}, ${e.b})`,o=`rgb(${Math.min(255,e.r+40)}, ${Math.min(255,e.g+40)}, ${Math.min(255,e.b+40)})`;document.body.style.background=`linear-gradient(135deg, ${n} 0%, ${o} 100%)`}const vt=document.getElementById("start-button");vt&&vt.addEventListener("click",()=>{T="classic";const t=w("classic");C={...t.colors.baseColor},it={...t.colors.targetColor},ct={...t.colors.hazardColor},Kt(1)});window.addEventListener("resize",()=>{v&&(Et(),S.forEach(t=>{N(t.element),t.element.remove()}),M.forEach(t=>{N(t.element),t.element.remove()}),Ct(),Mt(),Lt())});document.addEventListener("DOMContentLoaded",()=>{document.body.classList.remove("game-started"),Z();const t=w("classic");C={...t.colors.baseColor},it={...t.colors.targetColor},ct={...t.colors.hazardColor},Rt(t),lt(1,"classic"),Zt(),Ut(),ee()});async function ee(){try{const e=await(await fetch("version.json")).json(),n=document.getElementById("version-number");n&&e.version&&(n.textContent=`v${e.version}`)}catch(t){console.error("Failed to load version:",t)}}
